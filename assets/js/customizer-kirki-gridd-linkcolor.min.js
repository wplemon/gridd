wp.customize.controlConstructor["gridd-wcag-lc"]=wp.customize.Control.extend({hue:0,allColors:!1,colors:{},ready:function(){this.setHue(),this.updateColors(!1),this.initAuto()},embed:function(){var o=this,t=o.section();t&&wp.customize.section(t,function(t){t.expanded.bind(function(t){t&&o.actuallyEmbed()})})},actuallyEmbed:function(){"resolved"!==this.deferred.embedded.state()&&(this.renderContent(),this.deferred.embedded.resolve())},initAuto:function(){var o=this;o.setHue(),this.updateColors(!1),this.container.find(".kirki-input-container.auto").show(),this.container.find(".color-hue-container").html('<input class="color-hue" type="text" data-type="hue" value="'+this.hue+'" />'),this.initHuePicker(),this.settingsWatchers=function(){o.watchSetting(o.params.choices.backgroundColor),o.watchSetting(o.params.choices.textColor)},this.settingsWatchers(),o.container.find(".expand-selectors").on("click",function(t){t.preventDefault(),o.container.find(".rating-containers-wrapper").toggleClass("hidden")})},initHuePicker:function(){var t=this,o=t.container.find(".color-hue");o.attr("value",this.hue),o.wpColorPicker({change:function(){setTimeout(function(){t.hue=parseInt(o.val(),10),t.updateColors(!0)},20)}})},setHue:function(){var t=this.setting.get();this.hue=t?wcagColors.getColorProperties(t).h:210},queryColors:function(t){var o,e,i=wp.customize(this.params.choices.backgroundColor).get(),s=wcagColors.getColorProperties(i);switch(t){case"AAA":o=7,e=3;break;case"AA":o=4.5,e=2;break;case"A":o=3,e=1}return this.allColors||(this.allColors=wcagColors.getAll({hue:this.hue,minHueDiff:0,maxHueDiff:3,stepDiff:3,stepSaturation:.025,stepLightness:.025,minLightness:.5<s.l?0:.5,maxLightness:.5<s.l?.5:1})),this.allColors.pluck({color:wp.customize(this.params.choices.backgroundColor).get(),minContrast:o}).pluck({color:wp.customize(this.params.choices.textColor).get(),minContrast:e}).sortBy("s").getHexArray()},updateColors:function(t){var o;for(this.allColors=!1,this.colors={AAA:this.queryColors("AAA"),AA:this.queryColors("AA"),A:this.queryColors("A")},o=0;o<this.colors.AAA.length;o++)this.colors.AA.splice(this.colors.AA.indexOf(this.colors.AAA[o]),1);t&&this.updateColorValue()},watchSetting:function(t){var o=this;wp.customize(t,function(t){t.bind(function(){o.updateColors(!0)})}),-1<t.indexOf("[")&&wp.customize(t.split("[")[0],function(t){t.bind(function(){o.updateColors(!0)})})},getBest:function(){return this.colors.AAA[0]?this.colors.AAA[0]:this.colors.AA[0]?this.colors.AA[0]:this.colors.A[0]?this.colors.A[0]:void 0},updateColorValue:function(){this.getBest()&&this.container.find(".hidden-value-hex").attr("value",this.getBest()).trigger("change")}});